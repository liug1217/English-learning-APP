<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=440, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#AED7FF">
    <title>è‹±æ–‡å­¸ç¿’APP</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root {
            --main-font: "SF Pro", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --primary-blue: #51A8FF;
            --shadow-blue: #3A8CDD;
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #AED7FF;
            font-family: var(--main-font);
            overflow: hidden; /* å…¨åŸŸé–å®šï¼Œç”±å„é é¢è‡ªè¡Œæ±ºå®šæ˜¯å¦æ»¾å‹• */
        }

        /* è¨»å†Šå¸³è™Ÿä»‹é¢ 440x956 */
        #registration-screen {
            position: fixed;
            top: 0;
            left: 50%;
            width: 440px;
            height: 956px;
            margin-left: -220px;
            background-color: #AED7FF;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .reg-card {
            width: 360px;
            background: white;
            padding: 40px 30px;
            border-radius: 40px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .reg-input {
            width: 100%;
            padding: 18px;
            margin: 20px 0;
            border: 2px solid #EEE;
            border-radius: 15px;
            font-size: 16px;
            box-sizing: border-box;
            outline: none;
        }

        .reg-btn {
            width: 100%;
            padding: 18px;
            background: var(--primary-blue);
            color: white;
            border-radius: 15px;
            font-weight: 800;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 4px 0 var(--shadow-blue);
        }

        /* ä¸»è¦–çª— */
        .main-viewport {
            display: none; /* è¨»å†Šå®Œæ‰é¡¯ç¤º */
            position: relative;
            width: 440px;
            height: 956px;
            margin: 0 auto;
            overflow: hidden;
        }

        /* çŸ©å½¢ 6ï¼šä¸»é é¡¯ç¤º + æ»¾å‹•æ¨™ç±¤ */
        .rect-6 {
            box-sizing: border-box;
            position: absolute;
            top: 0;
            width: 440px;
            height: 110px;
            background-color: #FFFFFF;
            border-bottom: 1px solid #D9D9D9;
            z-index: 3000;
            display: flex;
            align-items: center;
            overflow-x: auto;
            white-space: nowrap;
            padding: 0 20px;
        }
        .rect-6::-webkit-scrollbar { display: none; }
        .header-tag {
            display: inline-block;
            padding: 8px 20px;
            margin-right: 10px;
            background: #F0F0F0;
            border-radius: 20px;
            font-weight: 800;
            font-size: 14px;
        }

        /* å…§å®¹å®¹å™¨ 440x956 */
        .view-section {
            position: absolute;
            top: 0;
            left: 0;
            width: 440px;
            height: 956px;
            display: none;
            box-sizing: border-box;
        }

        /* ä¸»é é¢ï¼šå¯ä¸Šä¸‹æ»¾å‹• */
        #home-view {
            display: block;
            overflow-y: auto;
            padding-bottom: 150px;
        }

        /* å­é é¢ï¼šå…¨éƒ¨ç¦æ­¢æ»¾å‹• */
        .sub-view {
            padding: 130px 20px 150px 20px;
            overflow: hidden;
        }

        .sub-card {
            background: white;
            width: 100%;
            height: 100%;
            border-radius: 40px;
            padding: 30px;
            box-sizing: border-box;
        }

        /* è¨­å®šé–‹é—œ */
        .toggle-switch {
            width: 65px;
            height: 34px;
            background: #DDD;
            border-radius: 17px;
            position: relative;
            cursor: pointer;
            transition: 0.3s;
        }
        .toggle-switch.on { background: #07C160; }
        .toggle-circle {
            width: 28px;
            height: 28px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 3px;
            left: 3px;
            transition: 0.3s;
        }
        .toggle-switch.on .toggle-circle { left: 34px; }

        /* å°è¦½åˆ— (çŸ©å½¢ 1) */
        .rect-1 {
            position: absolute;
            width: 420px;
            height: 110px;
            left: 10px;
            bottom: 20px;
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 42px;
            z-index: 4000;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        /* ä¿ç•™ä½ åŸæœ‰çš„å…ƒä»¶æ¨£å¼ */
        .rect-2 { position: absolute; width: 420px; height: 100px; left: 10px; top: 110px; background: #FFF; border-radius: 30px; }
        .fire-icon { position: absolute; left: 25px; top: 140px; font-weight: 900; font-size: 45px; z-index: 11; }
        .text-streak { position: absolute; left: 80px; top: 130px; font-weight: 800; font-size: 15px; z-index: 10; }
        .ellipse { position: absolute; width: 30px; height: 30px; top: 155px; background: #D9D9D9; border-radius: 50%; z-index: 10; }
        .rect-7, .rect-8, .rect-9, .rect-10 { position: absolute; width: 70px; height: 90px; left: 360px; background: #FFF; border-radius: 0 30px 30px 0; }
        .rect-7 { top: 251px; } .rect-8 { top: 341px; } .rect-9 { top: 431px; } .rect-10 { top: 521px; }
        .rect-3 { position: absolute; width: 381px; height: 400px; left: 10px; top: 251px; background: #FFF; border-radius: 30px; }
        .rect-4 { position: absolute; width: 312px; height: 85px; left: 30px; top: 530px; background: #51A8FF; border-radius: 30px; z-index: 20; cursor: pointer; box-shadow: 0 4px 0 #3A8CDD; }
        .text-today { position: absolute; left: 126px; top: 555px; font-weight: 900; font-size: 30px; color: #FFF; z-index: 21; pointer-events: none; }
        .rect-5 { position: absolute; width: 420px; height: 400px; left: 10px; top: 690px; background: #FFF; border-radius: 30px; }

        /* é—œå¡ç•«é¢æ¨£å¼ (ä¿ç•™ä¸è®Š) */
        #stage-screen { display: none; position: relative; width: 440px; height: 956px; margin: 0 auto; background: #AED7FF; overflow: hidden; }
        /* ...å…¶é¤˜é—œå¡ CSS èˆ‡ä½ æä¾›çš„ä¸€è‡´... */
    </style>
</head>
<body>

    <div id="registration-screen">
        <div class="reg-card">
            <h2 style="color: #333;">å»ºç«‹å­¸ç¿’å¸³è™Ÿ</h2>
            <input type="text" id="reg-name" class="reg-input" placeholder="è«‹è¼¸å…¥æš±ç¨±">
            <div class="reg-btn" onclick="finishReg()">é–‹å§‹å­¸ç¿’</div>
        </div>
    </div>

    <div id="app-content" class="main-viewport">
        <div id="sticky-header" class="rect-6">
            <div class="header-tag">ä»Šæ—¥æ¨è–¦</div>
            <div class="header-tag">æ ¸å¿ƒå–®å­—</div>
            <div class="header-tag">å¸¸ç”¨èªæ³•</div>
            <div class="header-tag">è½åŠ›ç‰¹è¨“</div>
        </div>

        <div id="home-view" class="view-section">
            <div class="rect-2"></div>
            <div class="fire-icon">ğŸ”¥</div>
            <div class="text-streak">é€£çºŒå­¸ç¿’ 0 å¤©</div>
            <div class="ellipse" style="left: 81px;"></div>
            <div class="ellipse" style="left: 121px;"></div>
            <div class="ellipse" style="left: 161px;"></div>
            <div class="ellipse" style="left: 201px;"></div>
            <div class="ellipse" style="left: 241px;"></div>
            <div class="ellipse" style="left: 281px;"></div>
            <div class="ellipse" style="left: 321px;"></div>
            <div class="rect-7"></div><div class="rect-8"></div><div class="rect-9"></div><div class="rect-10"></div>
            <div class="rect-3"></div>
            <div id="btn-today" class="rect-4"></div>
            <div class="text-today">ä»Šæ—¥å–®å­—</div>
            <div class="rect-5"></div>
        </div>

        <div id="stats-view" class="view-section sub-view">
            <div class="sub-card"><h2>å­¸ç¿’çµ±è¨ˆ</h2><p>é€™è£¡æ˜¯çµ±è¨ˆæ•¸æ“šä»‹é¢ï¼ˆç¦æ­¢æ²å‹•ï¼‰</p></div>
        </div>

        <div id="bank-view" class="view-section sub-view">
            <div class="sub-card"><h2>é¡Œåº«ç€è¦½</h2><p>é€™è£¡æ˜¯é¡Œåº«ä»‹é¢ï¼ˆç¦æ­¢æ²å‹•ï¼‰</p></div>
        </div>

        <div id="award-view" class="view-section sub-view">
            <div class="sub-card"><h2>æˆå°±çç« </h2><p>é€™è£¡æ˜¯æˆå°±ä»‹é¢ï¼ˆç¦æ­¢æ²å‹•ï¼‰</p></div>
        </div>

        <div id="settings-view" class="view-section sub-view">
            <div class="sub-card">
                <h2>ç³»çµ±è¨­å®š</h2>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-top:20px;">
                    <span style="font-weight:800;">èªéŸ³æé†’</span>
                    <div class="toggle-switch on" onclick="this.classList.toggle('on')"><div class="toggle-circle"></div></div>
                </div>
            </div>
        </div>
        
        <div class="rect-1">
            <div class="nav-item active" onclick="switchTab(0)">
                <i class="material-icons nav-icon">home</i><div class="nav-text">ä¸»é é¢</div>
            </div>
            <div class="nav-item" onclick="switchTab(1)">
                <i class="material-icons nav-icon">insert_chart</i><div class="nav-text">çµ±è¨ˆ</div>
            </div>
            <div class="nav-item" onclick="switchTab(2)">
                <i class="material-icons nav-icon">import_contacts</i><div class="nav-text">é¡Œåº«</div>
            </div>
            <div class="nav-item" onclick="switchTab(3)">
                <i class="material-icons nav-icon">military_tech</i><div class="nav-text">æˆå°±</div>
            </div>
            <div class="nav-item" onclick="switchTab(4)">
                <i class="material-icons nav-icon">settings</i><div class="nav-text">è¨­å®š</div>
            </div>
        </div>
    </div>

    <div id="stage-screen">
        <div class="stage-nav">
            <div class="back-arrow" onclick="goBack()">ã€ˆ</div>
            <div class="trophy-bar-bg">
                <div class="trophy-icon">ğŸ†</div>
                <div class="trophy-bar-fill" id="progress-bar"></div>
                <div class="progress-badge" id="progress-text">0/5</div>
            </div>
            <div class="heart-container"><span>â¤ï¸</span><span>5</span></div>
        </div>
        <div class="question-card">
            <div id="chinese-text" class="chinese-text">è¼‰å…¥ä¸­...</div>
            <div id="answer-area" class="answer-area">
                <div class="mic-btn-container" onclick="startSpeechRecognition()">
                    <div class="mic-icon">ğŸ™ï¸</div>
                    <div class="beta-tag">BETA</div>
                </div>
            </div>
        </div>
        <div class="word-pool-container">
            <div id="word-pool" class="word-pool"></div>
        </div>
        <div class="bottom-actions">
            <div class="check-btn" onclick="showAnswer()"><span style="font-size:24px;">ğŸ‘ï¸</span><span>è§€çœ‹ç­”æ¡ˆ</span></div>
            <div class="confirm-btn" onclick="checkFinal()">ç¢ºèª</div>
        </div>
    </div>

    <script>
        // ...ä¿ç•™ä½ åŸæœ¬çš„ database é¡Œåº«è³‡æ–™ (50é¡Œ)...
        const database = [ /* æ­¤è™•çœç•¥ä»¥ç¯€çœç©ºé–“ï¼Œæœƒä¿ç•™åœ¨ä½ çš„æª”æ¡ˆä¸­ */ ];

        function finishReg() {
            const name = document.getElementById('reg-name').value;
            if(!name) return alert("è«‹è¼¸å…¥æš±ç¨±");
            document.getElementById('registration-screen').style.display = 'none';
            document.getElementById('app-content').style.display = 'block';
        }

        function switchTab(index) {
            const views = ['home-view', 'stats-view', 'bank-view', 'award-view', 'settings-view'];
            const navItems = document.querySelectorAll('.nav-item');
            const header = document.getElementById('sticky-header');

            views.forEach((v, i) => {
                document.getElementById(v).style.display = (i === index) ? 'block' : 'none';
                navItems[i].classList.toggle('active', i === index);
            });

            // çŸ©å½¢ 6 åªæœ‰åœ¨ä¸»é é¢é¡¯ç¤º
            header.style.display = (index === 0) ? 'flex' : 'none';
        }

        // å•Ÿå‹•é—œå¡
        document.getElementById('btn-today').onclick = function() {
            // ...åŸ·è¡Œä½ åŸæœ¬çš„å•Ÿå‹•é—œå¡é‚è¼¯...
            currentSessionQuestions = database.sort(() => 0.5 - Math.random()).slice(0, 5);
            currentIndex = 0;
            document.getElementById('app-content').style.display = 'none';
            document.getElementById('stage-screen').style.display = 'block';
            loadQuestion();
        };

        // ...å…¶é¤˜ä¿ç•™ä½ åŸæœ¬çš„æ‰€æœ‰ JS é‚è¼¯ (loadQuestion, checkFinal, nextQuestion ç­‰)...
    </script>
</body>
</html>
